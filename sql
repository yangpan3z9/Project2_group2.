CREATE DATABASE IF NOT EXISTS `project2` DEFAULT CHARACTER SET latin1 COLLATE latin1_swedish_ci; USE `project2`; DROP TABLE IF EXISTS `user`; CREATE TABLE IF NOT EXISTS `user` ( `Id` int(10) NOT NULL AUTO_INCREMENT, `Name` varchar(20) NOT NULL, `Num_races` int(3) DEFAULT NULL, `City` varchar(30), `Friend_of` varchar(30), PRIMARY KEY (`Id`) ) DEFAULT CHARSET=utf8; INSERT INTO `user` (`Name`,`Num_races`,`City` ) VALUES ('Zach', 0,'St. Louis',''), ('Ted', 1,'St. Louis',''), ('Yang', 10,'St. Louis','') ; DROP TABLE IF EXISTS `event`; CREATE TABLE IF NOT EXISTS `event` ( `EventID` int(10) NOT NULL AUTO_INCREMENT, `Race_Name` varchar(50) NOT NULL, `Race_Location` varchar(20) NOT NULL, `Race_Date` date NOT NULL, `Race_Type` varchar(20) NOT NULL CHECK (`Race_Type` in ('5K', 'Marathon', 'Half-Marathon')), `Distance` numeric(5,2) NOT NULL, PRIMARY KEY (`EventID`) ) DEFAULT CHARSET=utf8; INSERT INTO `event` (`Race_Name`,`Race_Location`,`Race_Date`,`Race_Type`, `Distance` ) VALUES ('Foam_Glow','St. Louis', '2020-08-29','5K','3.1'), ('Go!_St.Louis_Marathon','St. Louis', '2020-03-28','Marathon','26.2'), ('Go!_St.Louis_Half_Marathon','St. Louis', '2020-03-28','Half-Marathon','13.1') ; DROP TABLE IF EXISTS `event_Results`; CREATE TABLE IF NOT EXISTS `event_Results` ( `Id` int(10) NOT NULL, `EventID` int(10) NOT NULL, `Race_Name` varchar(50) NOT NULL, `Race_Type` varchar(20) NOT NULL CHECK (`Race_Type` in ('5K', 'Marathon', 'Half-Marathon')), `Race_Date` date NOT NULL, `Race_Time` numeric(4,2), `Finish_Position` int(3), PRIMARY KEY (Id, EventId) -- FOREIGN KEY (Id) REFERENCES user(Id), -- CONSTRAINT FK_TYPE FOREIGN KEY (Race_Type) REFERENCES event(Race_Type), -- CONSTRAINT FK_DATE FOREIGN KEY (`Race_Date`) REFERENCES event(Race_Date), ) DEFAULT CHARSET=utf8; DROP TABLE IF EXISTS `records`; CREATE TABLE IF NOT EXISTS `records` ( `Id` int(10) NOT NULL AUTO_INCREMENT, `Distance` numeric(4,2), `Time` TIME NOT NULL, `Date` DATE NOT NULL, --PRIMARY KEY (`Distance`,'Time','Date') --FOREIGN KEY (`Id`) REFERENCES user(Id), ) DEFAULT CHARSET=utf8;
